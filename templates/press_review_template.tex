# Correction du template LaTeX pour éviter les erreurs d'Overfull \hbox et de caractère mal placé '&'
corrected_template = r"""
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[a4paper,margin=2.5cm]{geometry}
\usepackage{lmodern}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{tocloft}
\usepackage{enumitem}
\usepackage{datetime}
\usepackage{url}  % Ajouté pour gérer les liens longs
\def\UrlBreaks{\do\/\do-}  % Permet de couper les URL longues

\pagestyle{fancy}
\fancyhf{}
\rhead{Weekly Press Review}
\lhead{\today}
\cfoot{\thepage}

\titleformat{\section}{\Large\bfseries\sffamily\color{blue}}{}{0em}{}
\titleformat{\subsection}{\bfseries\color{black}}{}{0em}{}

\setlength{\parskip}{0.5em}
\setlength{\parindent}{0pt}

\begin{document}
\sloppy  % Permet d'éviter les Overfull \hbox

\begin{center}
    {\LARGE \textbf{Weekly Press Review}}\\
    \vspace{0.5em}
    \textit{Generated on {{ generated_date }}}
\end{center}

\vspace{1em}
\tableofcontents
\newpage

{% for company in companies %}
\section{ {{ company.company }} }
{% for article in company.articles %}
\subsection{ {{ article.title }} }
\textbf{Published:} {{ article.published }} \\
\textbf{Summary:} {{ article.summary }} \\
\textbf{Link:} \url{{ {{ article.link }} }}

\vspace{1em}
{% endfor %}
{% endfor %}

\end{document}
"""

# Sauvegarde du template corrigé dans le fichier press_review_template.tex
with open("press_review_template.tex", "w", encoding="utf-8") as f:
    f.write(corrected_template)
